host: yourhost.localhost

ingress:
  # these values have no effect on openshift
  enabled: false
  class: nginx-internal
  sslSecretName: your-ssl-secret

invenio:
  secret_key: "secret-key"
  security_login_salt: "security_login_salt"
  csrf_secret_salt: "csrf_secret_salt"
  existing_secret: false
  init: false
  # the variables below requires init=true
  default_users: # email:password
  demo_data: false # requires default_users
  sentry:
    enabled: false
    existing_secret: false
    secret_name: "sentry-secrets"
    dsn: ""
  datacite:
    enabled: false
    existing_secret: false
    secret_name: "datacite-secrets"
  remote_apps:
    enabled: false
    existing_secret: false
    secret_name: "remote-apps-secrets"
    credentials:
      - name: ""
        consumer_key: ""
        consumer_secret: ""
  extra_config:
    INVENIO_COLLECT_STORAGE: "flask_collect.storage.file"
    INVENIO_DATACITE_ENABLED: "False"
    INVENIO_LOGGING_CONSOLE_LEVEL: "WARNING"
    INVENIO_SEARCH_INDEX_PREFIX: ""

haproxy:
  enabled: true
  image: "haproxy:2.2"
  maxconn: 100
  maxconn_static: 500
  resources:
    requests:
      cpu: 250m
      memory: 500Mi
    limits:
      cpu: 250m
      memory: 500Mi

nginx:
  image: "nginx:1.23"
  max_conns: 100
  assets:
    location: /opt/invenio/var/instance/static
  records:
    client_max_body_size: 100m
  files:
    client_max_body_size: 50G
  resources:
    requests:
      cpu: 250m
      memory: 500Mi
    limits:
      cpu: 250m
      memory: 500Mi

web:
  image: your/invenio-image
  imagePullSecret: ""
  replicas: 6
  uwsgi:
    processes: 6
    threads: 4
  autoscaler:
    enabled: false
    # scale when CPU usage gets to
    scaler_cpu_utilization: 65
    max_web_replicas: 10
    min_web_replicas: 2
  assets:
    location: /opt/invenio/var/instance/static
  resources:
    requests:
      cpu: 500m
      memory: 500Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  annotations: []

worker:
  enabled: true
  image: your/invenio-image
  imagePullSecret: ""
  app: invenio_app.celery
  concurrency: 2
  log_level: INFO
  replicas: 2
  run_mount_path: /var/run
  celery_pidfile: /var/run/celerybeat.pid
  celery_schedule: /var/run/celery-schedule
  resources:
    requests:
      cpu: 500m
      memory: 500Mi
    limits:
      cpu: 1000m
      memory: 1Gi

workerBeat:
  resources:
    requests:
      cpu: 500m
      memory: 200Mi
    limits:
      cpu: '2'
      memory: 500Mi

persistence:
  enabled: true
  name: "shared-volume"
  access_mode: ReadWriteMany
  size: 10G
  storage_class: ""

postgresql:
  global:
    postgresql:
      auth:
        username: invenio
        database: invenio
        existingSecret: "db-secrets"
  primary:
    resources:
      requests:
        ephemeral-storage: 500Mi
        memory: 256Mi
        cpu: 250m
      limits:
        memory: 512Mi
        ephemeral-storage: 500Mi
        cpu: 500m
    persistence:
      existingClaim: db-claim
      enabled: "true"
  invenio:
    enabled: false
    existing_secret: false
    password: "db_password"
    database: "invenio"
    # The 'host' setting will only be used if postgresql.invenio.enabled = false. If 'host' is not set, "db" will be used
    host: ""
    port: 5432

# WARNING: do not use in production!
# See <https://opensearch.org/docs/latest/opensearch/install/helm/> instead.
search:
  opensearchJavaOpts: "-Xmx512M -Xms512M"
  config:
    opensearch.yml: |
      cluster.name: opensearch-cluster
      network.host: 0.0.0.0
      discovery.type: single-node
      plugins.security.disabled: true
  invenio:
    enabled: false
    dashboard:
      enabled: false
    existing_secret: false
    secret_name: "search-secrets"
    # The 'host' setting will only be used if search.invenio.enabled = false. If 'host' is not set, "search" will be used
    host: ""
    user: "username" # unimplemented
    password: "password" # unimplemented

redis:
  invenio:
    enabled: false
    # The 'host' setting will only be used if redis.invenio.enabled = false. If 'host' is not set, "cache" will be used
    host: ""
  architecture: standalone
  auth:
    enabled: false

rabbitmq:
  invenio:
    enabled: false
    existing_secret: false
    secret_name: "mq-secrets"
    # The 'host' setting will only be used if rabbitmq.invenio.enabled = false. If 'host' is not set, "mq" will be used
    host: ""
  auth:
    username: guest
    password: mq_password

logstash:
  enabled: false
  filebeat_image: filebeat_image_to_be_used
  environment: "qa"
